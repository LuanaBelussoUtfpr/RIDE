<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
      <ui:decorate template="menucadastrocarona.xhtml"></ui:decorate>
      
    <h:head>
        <title>RIDE</title>
        
        <script src="js/import_autocomplete.js"></script>
        <link type="text/css" rel="stylesheet" href="css/import_autocomplete.css" /> 
        
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"/>

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    </h:head>
    <h:body>
        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>

        <div class="row">
            <h:form class="col s12" id="form">
                <p:growl id="msgGlobal" sticky="true" /> 
                <div class="row">
                    <div class="container">  
                        <div class="center_align">
                            <div class="card">
                                <div class="card-content">
                                    <div class="row">
                                        <div class="input-field col s12">
                                            <p>Descrição da Carona:</p>
                                            <p:inputText id="Descricao" type="text" required="true" requiredMessage="Informe a descrição da carona!" value="#{cadastroCaronaMB.descricao}"></p:inputText>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p>Local de Saída:</p>
                                            <p:inputText id="origem" type="text" value="#{cadastroCaronaMB.localOrigem}"></p:inputText>
                                        </div>

                                        <div class="input-field col s6">
                                            <p>Local de Chegada:</p>
                                            <p:inputText id="destino" type="text" value="#{cadastroCaronaMB.localDestino}" ></p:inputText>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p>Vagas Disponíveis:</p>
                                            <p:inputText id="vagas" type="number" required="true" requiredMessage="Informe as vagas disponíveis!" value="#{cadastroCaronaMB.vagasDisponiveis}"></p:inputText>
                                        </div>

                                        <div class="input-field col s6">
                                            <p>Valor da Carona:</p>
                                            <p:inputText id="valor" type="number" required="true" requiredMessage="Informe o valor da carona!" value="#{cadastroCaronaMB.valorCarona}"></p:inputText>
                                             
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p>Horário de Saída</p>
                                            <p:inputText id="horario" required="true" requiredMessage="Informe o horário de saída!" value="#{cadastroCaronaMB.horarioCarona}"></p:inputText>
                                        </div>   
                                        
                                         <div class="input-field col s6">
                                            <p>Data da Carona:</p>
                                            <p:inputText id="data" type="date" required="true" requiredMessage="Informe a data da carona!" value="#{cadastroCaronaMB.dataCarona}"></p:inputText>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="input-field col s6">                                            
                                            <div class="inline">
                                                <p>Cidade de Origem:</p>
                                                <p:inputText value="#{cadastroCaronaMB.enderecoOrigem}" required="true" requiredMessage="Informe a cidade de origem!" id="enderecoOrigem" class="enderecoOrigem center-align"></p:inputText >
                                            </div>
                                            
                                            <div style="display: none" class="inline">
                                                <p:inputText value="#{cadastroCaronaMB.cidadeOrigem}" id="cidadeOrigem"/>
                                                <p:inputText value="#{cadastroCaronaMB.estadoOrigem}" id="estadoOrigem" />
                                                <p:inputText value="#{cadastroCaronaMB.paisOrigem}" id="paisOrigem" />
                                            </div>
                                        </div>  
                                        
                                        <div class="input-field col s6">                                            
                                            <div class="inline">
                                                <p>Cidade de Destino:</p>
                                                <p:inputText value="#{cadastroCaronaMB.enderecoDestino}" required="true" requiredMessage="Informe a cidade de detino!" id="enderecoDestino" class="enderecoDestino left-align"></p:inputText >
                                            </div>
                                            
                                            <div style="display: none" class="inline">
                                                <p:inputText value="#{cadastroCaronaMB.cidadeDestino}" id="cidadeDestino"/>
                                                <p:inputText value="#{cadastroCaronaMB.estadoDestino}" id="estadoDestino" />
                                                <p:inputText value="#{cadastroCaronaMB.paisDestino}" id="paisDestino" />
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div align="left">
                                        <p:commandButton update="msgGlobal" value="Cadastrar Carona" action="#{cadastroCaronaMB.criar()}" 
                                                     class="btn-large waves-effect waves-light"/>     
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:form>
        </div>
    </h:body>
      
    <script>
          TeleportAutocomplete.init('.enderecoOrigem').on('change', (value) => {
              try {
                  cidadeOrigem = value.name;
                  estadoOrigem = value.admin1Division;
                  paisOrigem = value.country;
                  document.getElementById("form:cidadeOrigem").value = cidadeOrigem;
                  document.getElementById("form:estadoOrigem").value = estadoOrigem;
                  document.getElementById("form:paisOrigem").value = paisOrigem;
              } catch (e) {
                  console.log("endereço não encontrado.");
              }
          });
          
         TeleportAutocomplete.init('.enderecoDestino').on('change', (value) => {
              try {
                  cidadeDestino = value.name;
                  estadoDestino = value.admin1Division;
                  paisDestino = value.country;
                  document.getElementById("form:cidadeDestino").value = cidadeDestino;
                  document.getElementById("form:estadoDestino").value = estadoDestino;
                  document.getElementById("form:paisDestino").value = paisDestino;
              } catch (e) {
                  console.log("endereço não encontrado.");
              }
          });
      </script>
</html>
