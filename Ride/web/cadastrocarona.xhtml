<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
      <ui:decorate template="menucadastrocarona.xhtml"></ui:decorate>
      
    <h:head>
        <title>RIDE - Cadastro Carona</title>
        
        <script src="js/import_autocomplete.js"></script>
        <link type="text/css" rel="stylesheet" href="css/import_autocomplete.css" /> 
        
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"/>

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    </h:head>
    <h:body>
        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>

        <div class="row">
            <h:form class="col s12" id="form">
                
                <p:growl id="msgGlobal" sticky="true" /> 
                <div class="row">
                    <div class="container">  
                        <div class="center_align">
                            <div class="card">
                                <div class="card-content">
                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p:inputText id="Descricao" type="text" class="validate" value="#{cadastroCaronaMB.descricao}"></p:inputText>
                                            <label for="descricao">Descrição:</label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p:inputText id="origem" type="text" class="validate" value="#{cadastroCaronaMB.localOrigem}"></p:inputText>
                                            <label for="origem">Local de Origem</label>
                                        </div>

                                        <div class="input-field col s6">
                                            <p:inputText id="destino" type="text" class="validate" value="#{cadastroCaronaMB.localDestino}" ></p:inputText>
                                            <label for="destino">Local de Destino</label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p:inputText id="vagas" type="number" class="validate" value="#{cadastroCaronaMB.vagasDisponiveis}"></p:inputText>
                                            <label for="vagas">Vagas Disponíveis</label>
                                        </div>

                                        <div class="input-field col s6">
                                            <p:inputText id="valor" type="number" class="validate" value="#{cadastroCaronaMB.valorCarona}"></p:inputText>
                                            <label for="valor">Valor da Carona</label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <p:inputText id="horario" type="text" class="validate" value="#{cadastroCaronaMB.horarioCarona}"></p:inputText>
                                            <label for="horario">Horário da Carona</label>
                                        </div>   
                                    </div>
                                    
                                    <div class="row">
                                        <div class="input-field col s6">                                            
                                            <div class="inline">
                                                <p:inputText value="#{cadastroCaronaMB.adress}" id="address" class="address center-align" placeholder="Endereço"></p:inputText >
                                            </div>
                                            
                                            <div style="display: none" class="inline">
                                                <p:inputText value="#{cadastroCaronaMB.cidade}" id="cidade"/>
                                                <p:inputText value="#{cadastroCaronaMB.estado}" id="estado" />
                                                <p:inputText value="#{cadastroCaronaMB.pais}" id="pais" />
                                            </div>
                                        </div>

                                        <div class="input-field col s6">
                                            <h6>Data da Carona</h6>
                                            <p:inputText id="data" type="date" class="validate" value="#{cadastroCaronaMB.dataCarona}"></p:inputText>
                                        </div>
                                    </div>

                                    <p:commandButton update="msgGlobal" value="Registrar" action="#{cadastroCaronaMB.criar()}" class="btn-large active orange black-text" />                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:form>
        </div>
    </h:body>
      
    <script>
          TeleportAutocomplete.init('.address').on('change', (value) => {
              try {
                  cidade = value.name;
                  estado = value.admin1Division;
                  pais = value.country;
                  console.log(cidade, estado, pais, rua);
                  document.getElementById("form:cidade").value = cidade;
                  document.getElementById("form:estado").value = estado;
                  document.getElementById("form:pais").value = pais;
              } catch (e) {
                  console.log("endereço não encontrado.");
              }
          });
      </script>
</html>
